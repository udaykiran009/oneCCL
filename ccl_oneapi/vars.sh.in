#!/bin/bash

print_help()
{
    echo ""
    echo "Usage: vars.sh [--ccl-configuration[=cpu_icc|cpu_gpu_dpcpp]]"
    echo ""
    echo "By default, --ccl-configuration=cpu_gpu_dpcpp"
    echo "The arguments to the sourced script might be ignored"
    echo "(consult the documentation for the shell you are using)." 
    echo "The alternative way to pass the value of ccl-configuration"
    echo "to the script is through CCL_CONFIGURATION environment variable."
    echo ""
}

WORK_DIR="$(cd "$( dirname "${BASH_SOURCE[0]:-$0}" )" > /dev/null && pwd)"
export CCL_ROOT="$(cd ${WORK_DIR}/../; pwd -P)"

if [ -z ${CCL_CONFIGURATION} ]
then
    CCL_CONFIGURATION=cpu_gpu_dpcpp
fi

args=$*
for arg in $args
do
    case "$arg" in
        --ccl-configuration=*)
            ccl_configuration="${arg#*=}"
            ;;
    esac
done

case "$ccl_configuration" in
    cpu_gpu_dpcpp|cpu_icc)
        ;;
    *)
        ccl_configuration="cpu_gpu_dpcpp"
        ;;
esac
export CCL_CONFIGURATION=${ccl_configuration}

CCL_ATL_TRANSPORT_PATH="${CCL_ROOT}/lib/${ccl_configuration}"; export CCL_ATL_TRANSPORT_PATH

export CPATH=${CCL_ROOT}/include/${ccl_configuration}${CPATH+:${CPATH}}
export LIBRARY_PATH=${CCL_ROOT}/lib/${ccl_configuration}${LIBRARY_PATH+:${LIBRARY_PATH}}
export LD_LIBRARY_PATH=${CCL_ROOT}/lib/${ccl_configuration}${LD_LIBRARY_PATH+:${LD_LIBRARY_PATH}}
